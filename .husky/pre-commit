#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "=================================="
echo "ğŸš€ Báº®T Äáº¦U KIá»‚M TRA TRÆ¯á»šC KHI COMMIT"
echo "=================================="
echo ""

# BÆ°á»›c 1: Kiá»ƒm tra lá»—i TypeScript
echo "ğŸ“ [BÆ°á»›c 1/2] Kiá»ƒm tra lá»—i TypeScript..."
echo "   â†’ Äang phÃ¢n tÃ­ch kiá»ƒu dá»¯ liá»‡u..."
npm run type-check
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Lá»–I: PhÃ¡t hiá»‡n lá»—i TypeScript!"
  echo "   â†’ Vui lÃ²ng sá»­a cÃ¡c lá»—i kiá»ƒu dá»¯ liá»‡u trÆ°á»›c khi commit"
  exit 1
fi
echo "   âœ… TypeScript: KhÃ´ng cÃ³ lá»—i"
echo ""

# BÆ°á»›c 2: Format code
echo "âœ¨ [BÆ°á»›c 2/2] Tá»± Ä‘á»™ng format code..."
echo "   â†’ Äang Ä‘á»‹nh dáº¡ng láº¡i code..."
npm run lint-staged
if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Lá»–I: KhÃ´ng thá»ƒ format code!"
  echo "   â†’ Vui lÃ²ng kiá»ƒm tra láº¡i file code"
  exit 1
fi
echo "   âœ… Format: Code Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng"
echo ""

echo "=================================="
echo "âœ… Táº¤T Cáº¢ KIá»‚M TRA ÄÃƒ HOÃ€N Táº¤T!"
echo "ğŸ‰ Äang tiáº¿n hÃ nh commit..."
echo "=================================="
